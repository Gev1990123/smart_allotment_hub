# =========================
# Global settings
# =========================
persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log

# Make auth options per-listener
per_listener_settings true

# =========================
# Listener 1: plaintext MQTT (Python client)
# =========================
listener 1883 0.0.0.0
protocol mqtt
allow_anonymous false
password_file /mosquitto/config/passwd

# =========================
# Listener 2: TLS MQTT (sensors) 
# =========================
#listener 8883 0.0.0.0
#protocol mqtt

#cafile   /mosquitto/certs/ca.crt
#certfile /mosquitto/certs/server.crt
#keyfile  /mosquitto/certs/server.key

#require_certificate false

# Sensors connect over TLS without username/password
#allow_anonymous true